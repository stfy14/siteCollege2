from app import create_app, db
import click

app = create_app()

@app.cli.command("init-db")
def init_db():
    try:
        with app.app_context():
            db.create_all()
        print("База данных успешно инициализирована")
    except Exception as e:
        print(f"Ошибка инициализации БД: {str(e)}")

@app.cli.command("add-sample-data")
def add_sample_data():
    from app.models import Work
    with app.app_context():
        works = [
            Work(
                title="Автоматизация проектирования в среде АКСПИСАЛ",
                authors="Тимонина А.В.",
                description="Освоение автономных казанков и оптимизация рабочих процессов.",
                award="Диплом 1 степени",
                university="Екатеринбургский государственный университет",
                direction="Компьютерные системы"
            ),
            Work(
                title="Современные тенденции в архитектурном дизайне",
                authors="Иванов И.И.",
                description="Исследование новых форм и концепций в области архитектуры.",
                award="Диплом 2 степени",
                university="Уральский федеральный университет",
                direction="Архитектура"
            ),
            Work(
                title="Инновационные технологии в ландшафтной архитектуре",
                authors="Петрова А.С.",
                description="Применение IT-решений для создания экологичных городских пространств.",
                award="Диплом 3 степени",
                university="Екатеринбургский институт архитектуры",
                direction="Ландшафтная архитектура"
            ),
            Work(
                title="Креативное искусство в урбанистическом пространстве",
                authors="Сидоров П.К.",
                description="Влияние изобразительного искусства на формирование городской среды.",
                award="Участник конкурса литературы",
                university="Екатеринбургский государственный университет",
                direction="Искусство в архитектуре"
            ),
            Work(
                title="Экологические аспекты современного проектирования",
                authors="Кузнецов М.Е.",
                description="Анализ устойчивых технологий в строительстве и дизайне.",
                award="Золотой диплом по литературе",
                university="Уральский федеральный университет",
                direction="Архитектура"
            ),
            Work(
                title="Интеграция IT в архитектурное проектирование",
                authors="Лебедев К.В.",
                description="Использование компьютерных технологий для повышения точности проектных работ.",
                award="Диплом 1 степени",
                university="Екатеринбургский институт архитектуры",
                direction="Компьютерные системы"
            ),
            Work(
                title="Эстетика и функциональность в городской среде",
                authors="Новикова Л.П.",
                description="Соединение эстетических и практических решений в современном проектировании.",
                award="Диплом 2 степени",
                university="Екатеринбургский государственный университет",
                direction="Искусство в архитектуре"
            ),
            Work(
                title="Традиционные методы в современной архитектуре",
                authors="Федоров Н.А.",
                description="Сравнительный анализ классических и современных подходов в архитектурном дизайне.",
                award="Диплом 3 степени",
                university="Уральский федеральный университет",
                direction="Архитектура"
            ),
            Work(
                title="Ландшафтный дизайн и инновации",
                authors="Громова Е.И.",
                description="Новые подходы к созданию природных ландшафтов в условиях городской застройки.",
                award="Участник конкурса литературы",
                university="Екатеринбургский институт архитектуры",
                direction="Ландшафтная архитектура"
            ),
            Work(
                title="Компьютерное моделирование в архитектурном проектировании",
                authors="Смирнов Д.В.",
                description="Применение современных программных средств для моделирования архитектурных объектов.",
                award="Золотой диплом по литературе",
                university="Екатеринбургский государственный университет",
                direction="Компьютерные системы"
            )
        ]
        for work in works:
            db.session.add(work)
        db.session.commit()
        click.echo("Примеры данных добавлены")

if __name__ == '__main__':
    app.run(debug=True)
