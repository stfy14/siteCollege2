{% extends "base.html" %}
{% block content %}
<div class="header-search-form">
    <form class="filter-form" action="{{ url_for('main.index') }}" method="GET">

        <input type="hidden" name="search" value="{{ request.args.get('search', '') }}">

        <select name="award" class="select-box" onchange="this.form.submit()">
            <option value="">–í—Å–µ –Ω–∞–≥—Ä–∞–¥—ã</option>
            <option value="–î–∏–ø–ª–æ–º 1 —Å—Ç–µ–ø–µ–Ω–∏" {% if award_filter=="–î–∏–ø–ª–æ–º 1 —Å—Ç–µ–ø–µ–Ω–∏" %}selected{% endif %}>–î–∏–ø–ª–æ–º 1
                —Å—Ç–µ–ø–µ–Ω–∏</option>
            <option value="–î–∏–ø–ª–æ–º 2 —Å—Ç–µ–ø–µ–Ω–∏" {% if award_filter=="–î–∏–ø–ª–æ–º 2 —Å—Ç–µ–ø–µ–Ω–∏" %}selected{% endif %}>–î–∏–ø–ª–æ–º 2
                —Å—Ç–µ–ø–µ–Ω–∏</option>
            <option value="–î–∏–ø–ª–æ–º 3 —Å—Ç–µ–ø–µ–Ω–∏" {% if award_filter=="–î–∏–ø–ª–æ–º 3 —Å—Ç–µ–ø–µ–Ω–∏" %}selected{% endif %}>–î–∏–ø–ª–æ–º 3
                —Å—Ç–µ–ø–µ–Ω–∏</option>
            <option value="–£—á–∞—Å—Ç–Ω–∏–∫ –∫–æ–Ω–∫—É—Ä—Å–∞ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã" {% if award_filter=="–£—á–∞—Å—Ç–Ω–∏–∫ –∫–æ–Ω–∫—É—Ä—Å–∞ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã" %}selected{%
                endif %}>–£—á–∞—Å—Ç–Ω–∏–∫ –∫–æ–Ω–∫—É—Ä—Å–∞ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã</option>
            <option value="–ó–æ–ª–æ—Ç–æ–π –¥–∏–ø–ª–æ–º –ø–æ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–µ" {% if award_filter=="–ó–æ–ª–æ—Ç–æ–π –¥–∏–ø–ª–æ–º –ø–æ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–µ" %}selected{%
                endif %}>–ó–æ–ª–æ—Ç–æ–π –¥–∏–ø–ª–æ–º –ø–æ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–µ</option>
        </select>

        <select name="direction" class="direction-form" onchange="this.form.submit()">
            <option value="">–í—Å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</option>
            <option value="–ò—Å–∫—É—Å—Å—Ç–≤–æ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ" {% if direction_filter=="–ò—Å–∫—É—Å—Å—Ç–≤–æ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ" %}selected{% endif
                %}>–ò—Å–∫—É—Å—Å—Ç–≤–æ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ</option>
            <option value="–ö–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã" {% if direction_filter=="–ö–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã" %}selected{% endif %}>
                –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã</option>
            <option value="–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞" {% if direction_filter=="–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞" %}selected{% endif %}>–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</option>
            <option value="–õ–∞–Ω–¥—à–∞—Ñ—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞" {% if direction_filter=="–õ–∞–Ω–¥—à–∞—Ñ—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞" %}selected{% endif
                %}>–õ–∞–Ω–¥—à–∞—Ñ—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</option>
        </select>

        <select name="university" class="university-form" onchange="this.form.submit()">
            <option value="">–í—Å–µ –≤—É–∑—ã</option>
            <option value="–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥—Å–∫–∏–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç" {% if
                university_filter=="–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥—Å–∫–∏–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç" %}selected{% endif %}>
                –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥—Å–∫–∏–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç
            </option>
            <option value="–£—Ä–∞–ª—å—Å–∫–∏–π —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç" {% if
                university_filter=="–£—Ä–∞–ª—å—Å–∫–∏–π —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç" %}selected{% endif %}>
                –£—Ä–∞–ª—å—Å–∫–∏–π —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç
            </option>
            <option value="–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥—Å–∫–∏–π –∏–Ω—Å—Ç–∏—Ç—É—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã" {% if
                university_filter=="–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥—Å–∫–∏–π –∏–Ω—Å—Ç–∏—Ç—É—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã" %}selected{% endif %}>
                –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥—Å–∫–∏–π –∏–Ω—Å—Ç–∏—Ç—É—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
            </option>
        </select>
    </form>
    <form class="search-form" action="{{ url_for('main.index') }}" method="GET">
        <input type="text" 
               name="search" 
               placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..."
               value="{{ request.args.get('search', '') }}"
               oninput="debounceSearch(this.form)">
        <input type="hidden" name="award" value="{{ request.args.get('award', '') }}">
        <input type="hidden" name="direction" value="{{ request.args.get('direction', '') }}">
        <input type="hidden" name="university" value="{{ request.args.get('university', '') }}">
    </form>
</div>

{% if works is none %}
    <div class="no-works">
        ‚ö†Ô∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Å–∏—Å—Ç–µ–º—ã.
    </div>
{% elif works.items|length == 0 %}
    <div class="no-works">
        üéâ –ü–æ–∫–∞ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–π —Ä–∞–±–æ—Ç—ã. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!
    </div>
{% else %}
    <div class="works-grid">
        {% for work in works.items %}
        <div class="work-card">
            <h3>{{ work.title }}</h3>
            <p class="authors">{{ work.authors }}</p>
            <p class="award">üèÜ {{ work.award }}</p>
            <a href="{{ url_for('main.work_details', work_id=work.id) }}" class="btn">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
        </div>
        {% endfor %}
    </div>
{% endif %}
{% endblock %}